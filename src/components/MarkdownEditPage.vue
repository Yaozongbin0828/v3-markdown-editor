<script setup>
import { ref, onMounted, computed } from "vue";

defineProps({
  msg: String,
});

// ä½¿ç”¨ localStorage å­˜å‚¨ç¼–è¾‘å™¨å†…å®¹
const text = ref(`
<h1 align="center">åŸºäºWebçš„Markdownåä½œç¼–è¾‘å™¨</h1>
<p align="center">
  <a href="https://npmcharts.com/compare/@kangc/v-md-editor?minimal=true"><img src="https://img.shields.io/npm/dm/@kangc/v-md-editor.svg?sanitize=true" alt="Downloads"></a>
  <a href="https://www.npmjs.com/package/@kangc/v-md-editor"><img src="https://img.shields.io/npm/v/@kangc/v-md-editor.svg?sanitize=true" alt="Version"></a>
  <a href="https://www.npmjs.com/package/@kangc/v-md-editor"><img src="https://img.shields.io/npm/l/@kangc/v-md-editor.svg?sanitize=true" alt="License"></a>
</p>

## Markdown è¯­è¨€ ğŸ˜Š

Markdown æ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œåˆ›å§‹äººä¸ºçº¦ç¿°Â·æ ¼é²ä¼¯ï¼ˆJohn Gruberï¼‰ã€‚å®ƒå…è®¸äººä»¬ä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ï¼Œç„¶åè½¬æ¢æˆæœ‰æ•ˆçš„ HTML æ–‡æ¡£ã€‚Markdown è¯­æ³•ç®€æ´æ˜äº†ï¼Œé€‚åˆä¹¦å†™å„ç§æŠ€æœ¯æ–‡æ¡£ã€ç¬”è®°ã€åšå®¢ç­‰ã€‚
![Description](https://camo.githubusercontent.com/a55b5f9d5b808391587d75dd0c59139e1f588aacd48397a49976528cefb65ba5/68747470733a2f2f636172676f2e64757374696e6375727469732e636f6d2f70726f6a656374732f6d61726b646f776e2f6d61726b646f776e2d6d61726b2d6865616465722d757064617465642d323032312e706e673f36)

## å®‰è£… ğŸ—³
\`\`\`bash
# use npm
npm i @kangc/v-md-editor -S

# use yarn
yarn add @kangc/v-md-editor

# use pnpm
pnpm add @kangc/v-md-editor
\`\`\`

## Katex
$$\sum_{i=1}^n a_i=0$$

$$\int_{a}^{b} f(x) dx = F(b) - F(a)$$

## Mermaid
\`\`\`mermaid
graph TD
    A[Markdown ç¼–è¾‘å™¨] --> B[ç¼–è¾‘æ¨¡å—]
    A --> C[é¢„è§ˆæ¨¡å—]
    A --> D[åä½œæ¨¡å—]
    A --> E[å­˜å‚¨æ¨¡å—]
    A --> F[å®æ—¶åŒæ­¥æ¨¡å—]

    B --> G[Markdown è¯­æ³•è§£æ]
    B --> H[å†…å®¹ç¼–è¾‘å™¨ï¼ˆå¦‚v-md-editorï¼‰]
    C --> I[å®æ—¶é¢„è§ˆ]
    D --> J[åä½œåŒæ­¥]
    D --> K[ç”¨æˆ·å…‰æ ‡æŒ‡ç¤º]
    E --> L[æµè§ˆå™¨å­˜å‚¨ï¼ˆlocalStorage/IndexedDBï¼‰]
    F --> M[WebRTC/P2P]
    F --> N[å®æ—¶åŒæ­¥åº“ï¼ˆå¦‚Yjsï¼‰]
\`\`\`

## Usege
\`\`\`html
<template>
  <v-md-editor v-model="text" height="400px"></v-md-editor>
</template>
\`\`\`
\`\`\`css
:root {
  /* font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif; */
  line-height: 1.5;
  font-weight: 400;
  color-scheme: light dark;
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
\`\`\`
\`\`\`js
import Vue from 'vue';
import VueMarkdownEditor from '@kangc/v-md-editor';
import '@kangc/v-md-editor/lib/style/base-editor.css';
import vuepressTheme from '@kangc/v-md-editor/lib/theme/vuepress.js';
VueMarkdownEditor.use(vuepressTheme);
Vue.use(VueMarkdownEditor);
\`\`\`
## TodoList
- [x] Todolist
- [ ] Todolist
## ç¤ºä¾‹
::: tip
ä½ å¯ä»¥ç‚¹å‡» toolbar ä¸­çš„ tip æ¥å¿«é€Ÿæ’å…¥
:::

::: warning
è¿™æ˜¯ä¸€æ®µè­¦å‘Š
:::

::: danger
è¿™æ˜¯ä¸€ä¸ªå±é™©è­¦å‘Š
:::

::: details
è¿™æ˜¯ä¸€ä¸ªè¯¦æƒ…å—ï¼Œåœ¨ IE / Edge ä¸­ä¸ç”Ÿæ•ˆ
:::

::: tip è‡ªå®šä¹‰æ ‡é¢˜
ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å—ä¸­çš„æ ‡é¢˜
:::

::: danger STOP
å±é™©åŒºåŸŸï¼Œç¦æ­¢é€šè¡Œ
:::



`);

// ä¸»é¢˜åˆ‡æ¢
const theme = ref(localStorage.getItem("theme") || "light");

const updateBodyTheme = (newTheme) => {
  if (newTheme === "dark") {
    document.body.classList.add("dark");
    document.body.classList.remove("light");
  } else {
    document.body.classList.add("light");
    document.body.classList.remove("dark");
  }
};

const toggleTheme = () => {
  theme.value = theme.value === "light" ? "dark" : "light";
  localStorage.setItem("theme", theme.value);
  console.log(theme.value);
  updateBodyTheme(theme.value);
};

onMounted(() => {
  updateBodyTheme(theme.value);
});

// Logo
const logoStyle = computed(() => {
  return {
    filter: theme.value === "dark" ? "invert(1)" : "none",
  };
});
</script>

<template>
  <span title="ä¸»é¢˜åˆ‡æ¢" id="themeSwitchBtn" @click="toggleTheme">
    {{ theme === "light" ? "ğŸŒ" : "ğŸŒ’" }}
  </span>
  <a
    title="yaozongbin0828@v3-markdown-editor"
    :style="logoStyle"
    id="logo"
    class="fade-effect"
    href="https://github.com/Yaozongbin0828/v3-markdown-editor"
    target="_blank"
  >
    <img src="@/assets/github.svg" alt="Github" />
  </a>
  <div id="app">
    <h1 id="title">Vue3 Web Markdown Editor</h1>
    <v-md-editor v-model="text" height="600px"></v-md-editor>
  </div>
</template>

<style scoped>
.read-the-docs {
  color: #888;
}

</style>
